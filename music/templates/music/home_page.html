{% extends 'base.html' %}

{% block content %}
<ul class="list-articles">
	{% for p in posts %}
			<li><div class="article-panel">
				<p class="first">album: <span class="album-name">{{ p.album.name }}</span> | author: {{ p.author.username|default:"anonym" }}</p>
				<p class="last">date: {{ p.time_update|date:"d-m-Y H:i:s"}}</p>
			</div>
				<h2 style="padding-left: 20px">{{p.title}}</h2>
		{% autoescape off %}
		<div style="padding-left: 20px">{{p.content|linebreaks|truncatechars:100}}</div>
		{% endautoescape %}
			<div class="clear"></div>
			<p class="link-read-post"><a href="{{ p.get_absolute_url }}">Read post</a></p>
			</li>
	{% endfor %}
</ul>
{% endblock %}

{% block navigation %}
<div class="list-pages-container">
	<nav class="list-pages">
		{% if page_obj.has_other_pages %}
		<ul>
		{% if page_obj.has_previous %}
			<li><a href="?page={{ page_obj.previous_page_number }}">&lt;</a></li>
		{% endif %}
		{% for p in paginator.page_range %}
			{% if page_obj.number == p %}
				<li><a class="active"> {{ p }}</a></li>
			{% elif p >= page_obj.number|add:-2 and p <= page_obj.number|add:2  %}
				<li><a href="?page={{ p }}"> {{ p }}</a></li>
			{% endif %}
		{% endfor %}
		{% if page_obj.has_next %}
			<li><a href="?page={{ page_obj.next_page_number }}">&gt;</a></li>
		{% endif %}
		</ul>
		{% endif %}
	</nav>
</div>
{% endblock %}